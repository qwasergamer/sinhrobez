<!DOCTYPE html>
<html lang="ru">
<head>
<link rel="icon" href="images/logo.ico"><!-- 32×32 -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Контакты - Синхро-Безопасность</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Чердак -->
    <div class="top-bar">
        <div class="container">
            <div class="top-contacts">
                <div class="top-contact-item">
                    <i class="fas fa-phone"></i>
                    <span>+7 (919) 157-79-00</span>
                </div>
                <div class="top-contact-item">
                    <i class="fas fa-envelope"></i>
                    <span>vladimir_minkov@mail.ru</span>
                </div>
            </div>
            <a href="#demo" class="top-cta">Заказать демо</a>
        </div>
    </div>

    <!-- Шапка -->
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">
                    <div class="logo-icon">СБ</div>
                    <div class="logo-text">
                        <h1>Синхро-Безопасность</h1>
                        <p class="tagline">Промышленная автоматизация контроля доступа</p>
                    </div>
                </a>
                <nav class="main-nav" id="mainNav">
                    <ul>
                        <li><a href="index.html"><i class="fas fa-home"></i>Главная</a></li>
                        <li><a href="about.html"><i class="fas fa-info-circle"></i>О продукте</a></li>
                        <li><a href="features.html"><i class="fas fa-star"></i>Возможности</a></li>
                        <li><a href="technology.html"><i class="fas fa-cogs"></i>Технологии</a></li>
                        <li><a href="contacts.html" class="active"><i class="fas fa-phone"></i>Контакты</a></li>
                    </ul>
                </nav>
                <button class="side-menu-btn" id="sideMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Боковое меню -->
    <div class="side-menu" id="sideMenu">
        <div class="side-menu-header">
            <h3>Все разделы</h3>
            <button class="close-side-menu" id="closeSideMenu">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <nav class="side-menu-nav">
            <ul>
                <li><a href="index.html"><i class="fas fa-home"></i>Главная</a></li>
                <li><a href="about.html"><i class="fas fa-info-circle"></i>О продукте</a></li>
                <li><a href="features.html"><i class="fas fa-star"></i>Возможности</a></li>
                <li><a href="technology.html"><i class="fas fa-cogs"></i>Технологии</a></li>
                <li><a href="requirements.html"><i class="fas fa-server"></i>Требования</a></li>
                <li><a href="installation.html"><i class="fas fa-download"></i>Установка</a></li>
                <li><a href="docs.html"><i class="fas fa-book"></i>Документация</a></li>
                <li><a href="contacts.html"><i class="fas fa-phone"></i>Контакты</a></li>
                <li><a href="download.html"><i class="fas fa-file-download"></i>Скачать</a></li>
                <li><a href="support.html"><i class="fas fa-headset"></i>Поддержка</a></li>
                <li><a href="integration.html"><i class="fas fa-link"></i>Интеграция</a></li>
                <li><a href="privacy.html"><i class="fas fa-shield-alt"></i>Политика</a></li>
            </ul>
        </nav>
    </div>

    <!-- Заголовок страницы -->
    <section class="page-header">
        <div class="container">
            <h1>Контакты</h1>
            <div class="breadcrumb">
                <a href="index.html">Главная</a> / <span>Контакты</span>
            </div>
        </div>
    </section>

    <!-- Содержимое страницы -->
    <section class="content-section">
        <div class="container">
            <div class="features-grid" style="margin-bottom: 60px;">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <h3>Техническая поддержка</h3>
                    <p>
                        <strong>Телефон:</strong> +7 (919) 157-79-00<br>
                        <strong>Email:</strong> vladimir_minkov@mail.ru<br>
                        <strong>Время работы:</strong> Пн-Пт 9:00-18:00 МСК<br>
                        <strong>Экстренная поддержка:</strong> 24/7 для критических инцидентов
                    </p>
                    <div style="margin-top: 20px;">
                        <a href="support.html" class="btn btn-primary" style="padding: 10px 20px; font-size: 0.9rem;">
                            <i class="fas fa-envelope"></i> Написать в поддержку
                        </a>
                    </div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <h3>Отдел продаж</h3>
                    <p>
                        <strong>Для новых клиентов:</strong> +7 (919) 157-79-00<br>
                        <strong>Email продажи:</strong> vladimir_minkov@mail.ru<br>
                        <strong>Коммерческие вопросы:</strong> Лицензирование, цены, условия<br>
                        <strong>Демо-версия:</strong> Бесплатно на 30 дней
                    </p>
                    <div style="margin-top: 20px;">
                        <a href="#demo" class="btn btn-primary" style="padding: 10px 20px; font-size: 0.9rem;">
                            <i class="fas fa-desktop"></i> Заказать демо
                        </a>
                    </div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-handshake"></i>
                    </div>
                    <h3>Партнёрская программа</h3>
                    <p>
                        <strong>Для интеграторов:</strong> Специальные условия<br>
                        <strong>Для дистрибьюторов:</strong> Высокие комиссии<br>
                        <strong>Сертификация:</strong> Обучение партнёров<br>
                        <strong>Техническая помощь:</strong> Внедрение и настройка
                    </p>
                    <div style="margin-top: 20px;">
                        <a href="integration.html" class="btn btn-primary" style="padding: 10px 20px; font-size: 0.9rem;">
                            <i class="fas fa-users"></i> Стать партнёром
                        </a>
                    </div>
                </div>
            </div>

            <!-- Форма обратной связи -->
            <div id="demo" style="background: var(--oil-light); padding: 40px; border-radius: 10px; margin-bottom: 40px;">
                <h2 style="color: var(--oil-dark); margin-bottom: 30px; text-align: center;">
                    <i class="fas fa-calendar-alt" style="color: var(--oil-gold); margin-right: 10px;"></i>
                    Заказать демонстрацию
                </h2>
                
                <form class="contact-form" id="contactForm">
                    <div class="form-group">
                        <label for="name">Как к вам обращаться? * <span style="color: var(--oil-fire); font-size: 0.9em;">(обязательное поле)</span></label>
                        <input type="text" id="name" class="form-control" required placeholder="Алукард Цепеш">
                    </div>
                    
                    <div class="form-group">
                        <label for="company">Название компании * <span style="color: var(--oil-fire); font-size: 0.9em;">(обязательное поле)</span></label>
                        <input type="text" id="company" class="form-control" required placeholder="ООО 'Промышленные Решения'">
                    </div>
                    
                    <div class="form-group">
                        <label for="position">Должность</label>
                        <input type="text" id="position" class="form-control" placeholder="Системный администратор / IT-директор">
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Телефон * <span style="color: var(--oil-fire); font-size: 0.9em;">(обязательное поле)</span></label>
                        <input type="tel" id="phone" class="form-control" required placeholder="+7 (999) 123-45-67">
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email * <span style="color: var(--oil-fire); font-size: 0.9em;">(обязательное поле)</span></label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="emailName" class="form-control" style="flex: 1;" placeholder="Ваше имя в почте">
                            <span style="align-self: center; font-size: 1.2rem;">@</span>
                            <select id="emailDomain" class="form-control" style="flex: 1;">
                                <option value="mail.ru">mail.ru</option>
                                <option value="gmail.com">gmail.com</option>
                                <option value="yandex.ru">yandex.ru</option>
                                <option value="bk.ru">bk.ru</option>
                                <option value="list.ru">list.ru</option>
                                <option value="rambler.ru">rambler.ru</option>
                                <option value="outlook.com">outlook.com</option>
                                <option value="company.ru">company.ru</option>
                                <option value="other">другой</option>
                            </select>
                        </div>
                        <input type="hidden" id="email" name="email">
                        <div id="customDomain" style="display: none; margin-top: 10px;">
                            <input type="text" id="otherDomain" class="form-control" placeholder="Введите ваш домен (например: mycompany.com)">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="users">Количество пользователей</label>
                        <select id="users" class="form-control">
                            <option value="">Выберите количество</option>
                            <option value="<100">До 100</option>
                            <option value="100-500">100-500</option>
                            <option value="500-1000">500-1000</option>
                            <option value="1000-5000">1000-5000</option>
                            <option value="5000-10000">5000-10000</option>
                            <option value=">10000">Более 10000</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="system">Используемая система</label>
                        <select id="system" class="form-control">
                            <option value="">Выберите систему</option>
                            <option value="AD">Active Directory</option>
                            <option value="Samba">Samba DC (RedOS)</option>
                            <option value="other">Другая система</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="message">Дополнительная информация</label>
                        <textarea id="message" class="form-control" rows="4" placeholder="Опишите вашу задачу, требования или вопросы..."></textarea>
                    </div>
                    
                    <!-- Чекбокс согласия -->
                    <div class="form-group" style="display: flex; align-items: flex-start; gap: 10px;">
                        <input type="checkbox" id="privacyCheck" style="margin-top: 5px;" required>
                        <label for="privacyCheck" style="font-size: 0.9rem; color: var(--oil-steel);">
                            Я согласен(на) с <a href="#" id="privacyLink" style="color: var(--oil-gold);">политикой конфиденциальности</a> 
                            и даю согласие на обработку персональных данных *
                        </label>
                    </div>
                    
                    <div class="form-group" style="text-align: center;">
                        <button type="submit" class="btn btn-primary" style="padding: 15px 40px; font-size: 1.1rem;" id="submitBtn">
                            <i class="fas fa-paper-plane"></i> Отправить заявку
                        </button>
                    </div>
                </form>
            </div>

            <!-- Часто задаваемые вопросы -->
            <div style="margin-top: 60px;">
                <h2 style="color: var(--oil-dark); margin-bottom: 30px; text-align: center;">
                    <i class="fas fa-question-circle" style="color: var(--oil-gold); margin-right: 10px;"></i>
                    Часто задаваемые вопросы
                </h2>
                
                <div style="max-width: 800px; margin: 0 auto;">
                    <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid var(--oil-gold);">
                        <h4 style="color: var(--oil-dark); margin-bottom: 10px;">Сколько стоит внедрение?</h4>
                        <p>Стоимость зависит от количества пользователей и сложности интеграции. 
                        Демо-версия предоставляется бесплатно на 30 дней.</p>
                    </div>
                    
                    <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid var(--oil-gold);">
                        <h4 style="color: var(--oil-dark); margin-bottom: 10px;">Нужны ли специальные знания для установки?</h4>
                        <p>Наши специалисты проводят полное внедрение "под ключ". 
                        После установки предоставляется обучение для администраторов.</p>
                    </div>
                    
                    <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid var(--oil-gold);">
                        <h4 style="color: var(--oil-dark); margin-bottom: 10px;">Есть ли техподдержка на русском языке?</h4>
                        <p>Да, вся техническая поддержка осуществляется на русском языке 
                        специалистами с опытом работы в промышленном секторе.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Подвал -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3>Синхро-Безопасность</h3>
                    <p>Профессиональное решение для автоматизации управления группами безопасности.</p>
                </div>
                <div class="footer-col">
                    <h3>Контакты</h3>
                    <ul class="footer-contact">
                        <li><i class="fas fa-phone"></i> +7 (919) 157-79-00</li>
                        <li><i class="fas fa-envelope"></i> vladimir_minkov@mail.ru</li>
                        <li><i class="fas fa-clock"></i> Пн-Пт: 9:00-18:00 МСК</li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Документы</h3>
                    <ul class="footer-links">
                        <li><a href="privacy.html"><i class="fas fa-file-contract"></i> Политика конфиденциальности</a></li>
                        <li><a href="download.html"><i class="fas fa-balance-scale"></i> Лицензионное соглашение</a></li>
                        <li><a href="docs.html"><i class="fas fa-book"></i> Техническая документация</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; <span class="current-year">2025</span> Синхро-Безопасность. Все права защищены.</p>
                <p>Совместимо с: Active Directory, Samba DC (RedOS), 1С:Предприятие 8.x</p>
            </div>
        </div>
    </footer>

    <!-- Модальное окно успешной отправки -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <span class="close-modal" id="closeSuccessModal">&times;</span>
            <div style="text-align: center;">
                <div style="width: 80px; height: 80px; background: var(--oil-green); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 40px;">
                    <i class="fas fa-check"></i>
                </div>
                <h2 style="color: var(--oil-dark); margin-bottom: 20px;">Заявка отправлена!</h2>
                <p style="margin-bottom: 30px; color: var(--oil-steel);">
                    ✅ Спасибо за вашу заявку! Данные сохранены в системе.<br><br>
                    Наш специалист свяжется с вами в течение 1 рабочего дня для уточнения деталей.
                </p>
                <button class="btn btn-primary" id="closeSuccessBtn">
                    <i class="fas fa-times"></i> Закрыть
                </button>
            </div>
        </div>
    </div>

    <!-- Модальное окно политики -->
    <div class="modal" id="privacyModal">
        <div class="modal-content" style="max-width: 700px; max-height: 80vh; overflow-y: auto;">
            <span class="close-modal" id="closePrivacyModal">&times;</span>
            <h2 style="color: var(--oil-dark); margin-bottom: 20px;">Политика конфиденциальности</h2>
            
            <div style="margin-bottom: 25px;">
                <h3 style="color: var(--oil-gold); margin-bottom: 10px;">1. Общие положения</h3>
                <p style="color: var(--oil-steel); line-height: 1.6;">
                    Настоящая политика конфиденциальности регулирует порядок сбора, хранения, использования и раскрытия 
                    персональных данных пользователей сайта Синхро-Безопасность.
                </p>
            </div>
            
            <div style="margin-bottom: 25px;">
                <h3 style="color: var(--oil-gold); margin-bottom: 10px;">2. Собираемая информация</h3>
                <p style="color: var(--oil-steel); line-height: 1.6;">
                    При оформлении заявки на демонстрацию мы собираем следующую информацию:
                    • ФИО или наименование организации<br>
                    • Контактный телефон<br>
                    • Адрес электронной почты<br>
                    • Название компании<br>
                    • Количество пользователей<br>
                    • Используемая система
                </p>
            </div>
            
            <div style="margin-bottom: 25px;">
                <h3 style="color: var(--oil-gold); margin-bottom: 10px;">3. Цели сбора информации</h3>
                <p style="color: var(--oil-steel); line-height: 1.6;">
                    Собранная информация используется для:<br>
                    • Связи с вами для проведения демонстрации<br>
                    • Подготовки коммерческого предложения<br>
                    • Оказания технической поддержки<br>
                    • Информирования об обновлениях продукта
                </p>
            </div>
            
            <div style="margin-bottom: 25px;">
                <h3 style="color: var(--oil-gold); margin-bottom: 10px;">4. Защита данных</h3>
                <p style="color: var(--oil-steel); line-height: 1.6;">
                    Мы принимаем все необходимые меры для защиты ваших персональных данных от несанкционированного 
                    доступа, изменения, раскрытия или уничтожения.
                </p>
            </div>
            
            <div style="margin-bottom: 25px;">
                <h3 style="color: var(--oil-gold); margin-bottom: 10px;">5. Контакты</h3>
                <p style="color: var(--oil-steel); line-height: 1.6;">
                    По всем вопросам, связанным с обработкой персональных данных, вы можете обратиться:<br>
                    • Email: vladimir_minkov@mail.ru<br>
                    • Телефон: +7 (919) 157-79-00
                </p>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" id="acceptPrivacyBtn">
                    <i class="fas fa-check"></i> Я согласен с политикой
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
    // ===== JavaScript для обработки формы заявки с сохранением в SQLite =====
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Страница контактов загружена');
        
        // Обработка email с выбором домена
        const emailName = document.getElementById('emailName');
        const emailDomain = document.getElementById('emailDomain');
        const customDomain = document.getElementById('customDomain');
        const otherDomain = document.getElementById('otherDomain');
        const emailField = document.getElementById('email');
        
        // Обновление скрытого поля email
        function updateEmail() {
            let domain = emailDomain.value;
            if (domain === 'other') {
                domain = otherDomain.value;
            }
            if (emailName.value && domain) {
                emailField.value = emailName.value + '@' + domain;
            } else {
                emailField.value = '';
            }
        }
        
        // События для обновления email
        emailName.addEventListener('input', updateEmail);
        emailDomain.addEventListener('change', function() {
            if (this.value === 'other') {
                customDomain.style.display = 'block';
            } else {
                customDomain.style.display = 'none';
                updateEmail();
            }
        });
        otherDomain.addEventListener('input', updateEmail);
        
        // Обработка чекбокса согласия
        const privacyCheck = document.getElementById('privacyCheck');
        const privacyLink = document.getElementById('privacyLink');
        const privacyModal = document.getElementById('privacyModal');
        const closePrivacyModal = document.getElementById('closePrivacyModal');
        const acceptPrivacyBtn = document.getElementById('acceptPrivacyBtn');
        
        // Открытие модального окна с политикой
        privacyLink.addEventListener('click', function(e) {
            e.preventDefault();
            privacyModal.style.display = 'flex';
        });
        
        // Закрытие модального окна
        closePrivacyModal.addEventListener('click', function() {
            privacyModal.style.display = 'none';
        });
        
        // Согласие с политикой через модальное окно
        acceptPrivacyBtn.addEventListener('click', function() {
            privacyCheck.checked = true;
            privacyModal.style.display = 'none';
        });
        
        // Закрытие при клике вне окна
        window.addEventListener('click', function(e) {
            if (e.target === privacyModal) {
                privacyModal.style.display = 'none';
            }
        });
        
        // ===== Обработка отправки формы в SQLite =====
        const contactForm = document.getElementById('contactForm');
        const submitBtn = document.getElementById('submitBtn');
        
        if (contactForm) {
            contactForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                console.log('Отправка формы...');
                
                // Проверка чекбокса
                if (!privacyCheck.checked) {
                    alert('❌ Для отправки заявки необходимо согласиться с политикой конфиденциальности');
                    return;
                }
                
                // Собираем данные
                const formData = {
                    name: document.getElementById('name').value.trim(),
                    company: document.getElementById('company').value.trim(),
                    position: document.getElementById('position').value.trim(),
                    phone: document.getElementById('phone').value.trim(),
                    email: emailField.value.trim(),
                    users: document.getElementById('users').value,
                    system: document.getElementById('system').value,
                    message: document.getElementById('message').value.trim()
                };
                
                // Валидация на клиенте
                if (!formData.name || !formData.company || !formData.phone || !formData.email) {
                    alert('❌ Пожалуйста, заполните все обязательные поля');
                    return;
                }
                
                // Проверка email
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(formData.email)) {
                    alert('❌ Введите корректный email адрес');
                    return;
                }
                
                // Показываем загрузку
                const originalText = submitBtn.innerHTML;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Отправка...';
                submitBtn.disabled = true;
                
                try {
                    // Отправляем на PHP обработчик
                    const response = await fetch('process/demo_request.php', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(formData)
                    });
                    
                    const result = await response.json();
                    
                    console.log('Ответ от сервера:', result);
                    
                    if (result.success) {
                        // Показываем модальное окно успеха
                        document.getElementById('successModal').style.display = 'flex';
                        
                        // Очищаем форму
                        contactForm.reset();
                        emailField.value = '';
                        customDomain.style.display = 'none';
                        otherDomain.value = '';
                        
                        // Можно показать номер заявки в консоли
                        if (result.request_id) {
                            console.log('✅ Заявка сохранена в SQLite, ID:', result.request_id);
                        }
                    } else {
                        // Показываем ошибки
                        const errorMsg = result.error || result.errors?.join(', ') || 'Неизвестная ошибка';
                        alert('❌ Ошибка отправки: ' + errorMsg);
                    }
                } catch (error) {
                    console.error('Ошибка сети:', error);
                    
                    // Резервный вариант - отправка через mailto
                    const backupEmail = `mailto:vladimir_minkov@mail.ru?subject=Заявка с сайта Синхро-Безопасность&body=${encodeURIComponent(
                        `Новая заявка на демонстрацию:\n\n` +
                        `Имя: ${formData.name}\n` +
                        `Компания: ${formData.company}\n` +
                        `Телефон: ${formData.phone}\n` +
                        `Email: ${formData.email}\n` +
                        `Должность: ${formData.position}\n` +
                        `Пользователей: ${formData.users}\n` +
                        `Система: ${formData.system}\n` +
                        `Сообщение: ${formData.message}`
                    )}`;
                    
                    if (confirm('⚠️ Не удалось отправить заявку через сайт.\n\nОткрыть почтовый клиент для ручной отправки?')) {
                        window.location.href = backupEmail;
                    }
                } finally {
                    // Восстанавливаем кнопку
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                }
            });
        }
        
        // Обработчики модальных окон
        const successModal = document.getElementById('successModal');
        const closeSuccessModal = document.getElementById('closeSuccessModal');
        const closeSuccessBtn = document.getElementById('closeSuccessBtn');
        
        if (closeSuccessModal) {
            closeSuccessModal.addEventListener('click', function() {
                successModal.style.display = 'none';
            });
        }
        
        if (closeSuccessBtn) {
            closeSuccessBtn.addEventListener('click', function() {
                successModal.style.display = 'none';
            });
        }
        
        // Закрытие модальных окон при клике вне
        window.addEventListener('click', function(e) {
            if (e.target === successModal) {
                successModal.style.display = 'none';
            }
            if (e.target === privacyModal) {
                privacyModal.style.display = 'none';
            }
        });
        
        // Автоформатирование телефона
        const phoneInput = document.getElementById('phone');
        if (phoneInput) {
            phoneInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                
                if (value.startsWith('7') || value.startsWith('8')) {
                    value = value.substring(1);
                }
                
                if (value.length > 0) {
                    value = '+7 (' + value;
                    if (value.length > 7) value = value.substring(0, 7) + ') ' + value.substring(7);
                    if (value.length > 12) value = value.substring(0, 12) + '-' + value.substring(12);
                    if (value.length > 15) value = value.substring(0, 15) + '-' + value.substring(15);
                    if (value.length > 18) value = value.substring(0, 18);
                }
                
                e.target.value = value;
            });
        }
    });
    </script>
</body>
</html>